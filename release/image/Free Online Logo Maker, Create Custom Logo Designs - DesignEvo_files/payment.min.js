function updateBackButtonPosition(expand){if(expand)jQuery(".de-back-btn").css({transition:"all 0.333s",top:"27px"});else jQuery(".de-back-btn").css({transition:"all 0.333s",top:"16px"})}if(!window.bannerAnimationCallbacks){window.bannerAnimationCallbacks=new Array}window.bannerAnimationCallbacks.push(updateBackButtonPosition);var ABTestType="A";var packageType="A";var paymentType="B";if(!paymentType){paymentType=(new Date).getTime()%2===0?"A":"B";window.localStorage.setItem("ABPaymentType",paymentType)}var isAppUpgrade=false;var currentWebUrl="www.designevo.com"==document.domain?"https://www.designevo.com":"https://www.photoframemaster.com";var currencyCode=geoplugin_currencyCode()||"USD",currencySymbol="$",basicPrice={price:24.99,exPrice:geoplugin_currencyConverter(24.99),oldPrice:49.99,oldExPrice:geoplugin_currencyConverter(49.99)},plusPrice={price:49.99,oldPrice:99.99,exPrice:geoplugin_currencyConverter(49.99),oldExPrice:geoplugin_currencyConverter(99.99)},upgradePrice={price:(plusPrice.price-basicPrice.price).toFixed(2),oldPrice:(plusPrice.oldPrice-basicPrice.oldPrice).toFixed(2),exPrice:(plusPrice.exPrice-basicPrice.exPrice).toFixed(2),oldExPrice:geoplugin_currencyConverter(plusPrice.oldPrice-basicPrice.oldPrice)};var packageData=[{title:localPayment["free"],type:"Free",price:"0.00",giveCredit:localPayment["give-credit"],oldPrice:"",exPrice:"",count:2,btnInfo:localPayment["choose"],btnClass:"yellow-btn",isShow:true,oneTime:localPayment["one-time"],downloadSample:localPayment["download-sample"],tipItems:[{title:localPayment["low-files"],tip:localPayment["low-files-tip"]},{title:localPayment["png-background"]}]},{title:localPayment["basic"],type:"Basic",price:basicPrice.price,oldPrice:basicPrice.oldPrice,exPrice:basicPrice.exPrice,oldExPrice:basicPrice.oldExPrice,count:5,btnInfo:localPayment["choose"],btnClass:"yellow-btn",isShow:true,oneTime:localPayment["one-time"],downloadSample:localPayment["download-sample"],tipItems:[{title:localPayment["max-files"],tip:localPayment["max-files-tip"]},{title:localPayment["png-transparent"]},{title:localPayment["lifetime-support"]},{title:localPayment["print-ready"],tip:localPayment["print-ready-tip"]},{title:localPayment["re-download"]}]},{title:localPayment["plus"],type:"Plus",price:plusPrice.price,oldPrice:plusPrice.oldPrice,exPrice:plusPrice.exPrice,oldExPrice:plusPrice.oldExPrice,count:8,btnInfo:localPayment["choose"],btnClass:"yellow-btn",isShow:true,oneTime:localPayment["one-time"],downloadSample:localPayment["download-sample"],tipItems:[{title:localPayment["max-files"],tip:localPayment["max-files-tip"]},{title:localPayment["png-transparent"]},{title:localPayment["lifetime-support"]},{title:localPayment["print-ready"],tip:localPayment["print-ready-tip"]},{title:localPayment["re-download"]},{title:localPayment["pdf-svg"]},{title:localPayment["copyright-ownership"],tip:localPayment["copyright-ownership-tip"]}]}];var packageFAQs={items:[{title:localPayment["faq1"],reply:localPayment["faq-reply1"]},{title:localPayment["faq2"],reply:localPayment["faq-reply2"]},{title:localPayment["faq3"],reply:localPayment["faq-reply3"]},{title:localPayment["faq4"],reply:localPayment["faq-reply4"]},{title:localPayment["faq5"],reply:localPayment["faq-reply5"]},{title:localPayment["faq6"],reply:localPayment["faq-reply6"]}]};Vue.component("info-svg",{template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="18px" height="18px" viewBox="0 0 18 18" enable-background="new 0 0 18 18"><circle fill="#228A89" cx="9" cy="9" r="9"/><path fill="#FFFFFF" d="M10,3.5v2H8v-2H10z M8,14h2V7H8V14z"/></svg>'});Vue.component("plus-svg",{template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="94px" height="94px" viewBox="0 0 94 94" enable-background="new 0 0 94 94"><polygon fill="#D0021B" points="100,100 100,0 0,0 "/><polygon fill-rule="evenodd" clip-rule="evenodd" fill="#DD0000" points="0,0 94,0 94,94 0,0 "/><path fill="#FFFFFF" d="M64.68,18.788c-0.366,0.371-0.79,0.601-1.262,0.692c-0.472,0.091-0.944,0.033-1.416-0.173c0.293,0.482,0.407,0.982,0.334,1.5c-0.073,0.515-0.317,0.986-0.741,1.41c-0.724,0.724-1.505,1.043-2.344,0.954c-0.838-0.091-1.685-0.562-2.547-1.41l-2.929-2.932l7.536-7.54l2.645,2.641c0.912,0.916,1.433,1.786,1.555,2.608C65.632,17.362,65.355,18.113,64.68,18.788L64.68,18.788z M56.574,19.136l1.334,1.331c0.358,0.366,0.732,0.565,1.115,0.594c0.383,0.033,0.725-0.105,1.034-0.413c0.692-0.69,0.684-1.398-0.024-2.122L58.608,17.1L56.574,19.136L56.574,19.136z M62.694,15.189l-1.083-1.086l-1.904,1.9l1.147,1.147c0.798,0.771,1.506,0.851,2.116,0.24c0.342-0.342,0.488-0.688,0.439-1.036C63.361,16.005,63.125,15.617,62.694,15.189L62.694,15.189z M71.865,24.36l-3.491-3.489l-1.798,1.794l2.986,2.984l-1.205,1.207l-2.986-2.982l-2.026,2.03l3.5,3.501l-1.245,1.247l-5.062-5.056l7.544-7.54l5.045,5.046L71.865,24.36L71.865,24.36z M78.156,30.159c-0.122,0.588-0.415,1.109-0.863,1.561l-1.554-1.552c0.342-0.346,0.504-0.722,0.48-1.133c-0.032-0.409-0.236-0.81-0.635-1.205c-0.374-0.378-0.757-0.594-1.123-0.643c-0.374-0.051-0.691,0.055-0.952,0.319c-0.244,0.244-0.325,0.572-0.244,0.987c0.082,0.411,0.285,0.93,0.627,1.556c0.61,1.147,0.928,2.122,0.936,2.919c0.008,0.797-0.276,1.489-0.862,2.077c-0.651,0.651-1.408,0.916-2.279,0.793c-0.863-0.122-1.709-0.6-2.547-1.436c-0.578-0.58-1.001-1.215-1.27-1.904c-0.26-0.688-0.333-1.341-0.211-1.961c0.114-0.62,0.415-1.174,0.903-1.66l1.563,1.559c-0.83,0.832-0.749,1.746,0.244,2.738c0.366,0.37,0.732,0.584,1.09,0.641c0.358,0.057,0.667-0.049,0.936-0.317c0.293-0.295,0.415-0.622,0.366-0.986c-0.049-0.366-0.26-0.903-0.619-1.617c-0.366-0.712-0.618-1.311-0.765-1.795c-0.399-1.318-0.204-2.37,0.586-3.153c0.407-0.407,0.879-0.657,1.432-0.745c0.545-0.091,1.131-0.01,1.742,0.24c0.602,0.25,1.18,0.643,1.709,1.178c0.545,0.539,0.928,1.117,1.147,1.731C78.221,28.969,78.278,29.571,78.156,30.159L78.156,30.159z M84.983,37.479l-2.312-2.309l-6.274,6.28l-1.563-1.553l6.282-6.282l-2.278-2.278l1.261-1.26l6.144,6.143L84.983,37.479L84.983,37.479z M54.165,23.941l-10.166,4.916l-1.621-1.622l4.925-10.156l1.725,1.726l-3.971,7.369l7.375-3.961L54.165,23.941L54.165,23.941z M53.767,38.624l-1.652-1.654l1.033-2.075l-2.726-2.724l-2.073,1.036l-1.65-1.652l10.347-4.732l1.44,1.438L53.767,38.624L53.767,38.624z M52.099,31.331l1.888,1.886l1.872-3.77L52.099,31.331L52.099,31.331z M57.274,39.633l3.296,3.3l-1.245,1.247l-4.85-4.852l7.536-7.542l1.554,1.555L57.274,39.633L57.274,39.633z M66.885,46.699l5.021-5.02l1.554,1.559l-4.964,4.97c-0.822,0.822-1.733,1.212-2.734,1.18c-0.993-0.033-1.937-0.505-2.832-1.4c-0.879-0.879-1.351-1.807-1.399-2.793c-0.049-0.984,0.325-1.888,1.131-2.714l5.021-5.023l1.554,1.554l-4.98,4.977c-0.488,0.492-0.732,0.972-0.724,1.434c0.016,0.462,0.228,0.905,0.643,1.32C65.054,47.614,65.949,47.598,66.885,46.699L66.885,46.699z M78.522,50.813l-3.491-3.491l-1.798,1.799l2.986,2.986l-1.204,1.205l-2.987-2.987l-2.026,2.035l3.5,3.499l-1.253,1.253l-5.054-5.062l7.544-7.538l5.045,5.048L78.522,50.813L78.522,50.813z"/></svg>'});Vue.component("name-svg",{template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" class="c-payment__input-svg"><path fill="#C2C2C2" d="M11.998,2.833c1.827,0,3.008,1.303,3.008,3.322c0,2.142-1.379,3.953-3.008,3.953S8.994,8.297,8.994,6.155C8.994,4.137,10.173,2.833,11.998,2.833 M11.998,1C9.149,1,7.16,3.12,7.16,6.155c0,3.19,2.17,5.785,4.838,5.785c2.669,0,4.841-2.594,4.841-5.785C16.839,3.12,14.85,1,11.998,1L11.998,1z"/><path fill="#C2C2C2" d="M11.841,14.467l0.098,0.002h0.037h0.036l0.118-0.002c2.882,0.002,6.386,0.698,6.741,3.958c0.006,0.089,0.009,0.263,0.016,0.687c-1.97,1.348-4.34,2.057-6.888,2.057c-2.615,0-4.93-0.689-6.89-2.05c0.009-0.431,0.01-0.597,0.014-0.659C5.482,15.16,8.998,14.467,11.841,14.467 M12.115,12.634l-0.134,0.002l-0.098-0.002c-5.138,0-8.188,1.998-8.582,5.625c-0.011,0.085-0.015,0.245-0.027,0.958L3.27,19.654c0,0.019,0.002,0.033,0.003,0.053c0.002,0.023,0.002,0.051,0.008,0.076c0.004,0.023,0.011,0.049,0.017,0.07C3.305,19.875,3.31,19.9,3.317,19.92c0.01,0.021,0.021,0.044,0.032,0.066c0.01,0.021,0.02,0.041,0.031,0.063c0.012,0.021,0.026,0.041,0.043,0.061c0.014,0.019,0.027,0.037,0.043,0.055c0.018,0.02,0.039,0.037,0.058,0.055c0.012,0.012,0.022,0.025,0.036,0.035c0.006,0.003,0.014,0.01,0.021,0.014c0.002,0.002,0.005,0.006,0.01,0.008C5.956,22.082,8.785,23,11.999,23c3.134,0,6.04-0.941,8.408-2.723c0.006-0.004,0.01-0.008,0.016-0.012c0.005-0.004,0.013-0.008,0.017-0.011c0.013-0.011,0.021-0.021,0.035-0.03c0.021-0.021,0.041-0.037,0.062-0.06c0.017-0.017,0.028-0.035,0.041-0.054c0.019-0.021,0.032-0.038,0.045-0.062c0.013-0.019,0.021-0.04,0.03-0.061c0.013-0.022,0.021-0.044,0.031-0.067c0.008-0.021,0.014-0.043,0.021-0.064c0.007-0.023,0.012-0.047,0.017-0.072c0.004-0.024,0.006-0.051,0.008-0.076c0.002-0.02,0.004-0.035,0.004-0.055l-0.006-0.293c-0.013-0.807-0.019-1.012-0.026-1.104C20.303,14.632,17.254,12.634,12.115,12.634L12.115,12.634z"/></svg>'});Vue.component("card-svg",{template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="22px" height="22px" viewBox="0 0 22 22" enable-background="new 0 0 22 22" class="c-payment__input-svg"><path fill="#C2C2C2" d="M20,3H2C0.896,3,0,3.896,0,5v13c0,1.104,0.896,2,2,2h18c1.104,0,2-0.896,2-2V5C22,3.896,21.104,3,20,3zM20,16.947C20,17.589,19.648,18,19.014,18H2.986C2.35,18,2,17.589,2,16.947V12h18V16.947z M20,8H2V6.18C2,5.468,2.35,5,2.986,5h16.028C19.648,5,20,5.468,20,6.18V8z"/><rect x="3" y="14" fill="#C2C2C2" width="2" height="2"/><rect x="6" y="14" fill="#C2C2C2" width="3" height="2"/><rect x="10" y="14" fill="#C2C2C2" width="3" height="2"/><rect x="14" y="14" fill="#C2C2C2" width="2" height="2"/></svg>'});Vue.component("expiration-svg",{template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 22 22" class="c-payment__input-svg"><path fill="#C2C2C2" d="M20.682,4.5h-1.236V3.912c0-1.121-0.911-2.032-2.03-2.032h-0.024c-1.121,0-2.031,0.912-2.031,2.032V4.5H9.917V3.912c0-1.121-0.911-2.032-2.031-2.032H7.86c-1.12,0-2.031,0.912-2.031,2.032V4.5H4.318C3.314,4.5,2.5,5.314,2.5,6.318v14.364c0,1.004,0.814,1.817,1.818,1.817h16.364c1.004,0,1.817-0.813,1.817-1.817V6.318C22.5,5.314,21.686,4.5,20.682,4.5zM16.357,4.5V3.912c0-0.568,0.461-1.032,1.031-1.032h0.024c0.567,0,1.03,0.463,1.03,1.032V4.5v2.469C18.443,7.537,17.98,8,17.413,8h-0.022c-0.57,0-1.031-0.463-1.031-1.031V4.5H16.357z M6.83,4.5V3.912c0-0.568,0.461-1.032,1.031-1.032h0.026c0.568,0,1.031,0.463,1.031,1.032V4.5v2.469C8.917,7.537,8.455,8,7.886,8H7.86C7.292,8,6.83,7.537,6.83,6.969V4.5z M20.5,20.5h-16v-11h16V20.5z"/></svg>'});Vue.component("cvc-svg",{template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" class="c-payment__input-svg"><path fill="#C2C2C2" d="M10,11c-0.468,0-1,0.45-1,0.999v1.999C9,14.55,9.532,15,10,15s1-0.45,1-1.002v-1.999C11,11.45,10.468,11,10,11z"/><path fill="#C2C2C2" d="M15.709,5.088c-0.553-2.75-2.872-4.796-5.611-4.796c-2.724,0-4.996,1.993-5.593,4.76C2.971,5.303,2,6.686,2,8.364v8.271C2,18.491,3.18,20,5.002,20H10h4.998C16.82,20,18,18.491,18,16.637V8.364C18,6.764,17.119,5.427,15.709,5.088z M10.098,2.209c1.707,0,3.164,1.167,3.699,2.791H10H6.411C6.966,3.356,8.398,2.209,10.098,2.209z M16,16.637C16,17.389,15.718,18,14.998,18H10H5.002C4.282,18,4,17.389,4,16.637V8.364C4,7.612,4.282,7,5.002,7H10h4.998C15.718,7,16,7.612,16,8.364V16.637z"/></svg>'});Vue.component("select-svg",{template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><path fill="#00B13A" d="M2.924,8.621c1.743,1.5,4.281,3.785,4.281,3.785s5.843-6.888,11.369-10.204L19,3.359c-2.009,1.274-8.079,8.256-10.458,14.438c0,0-6.335-6.262-7.542-7.688L2.924,8.621L2.924,8.621z"/></svg>'});Vue.component("payment-select-svg",{template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><path fill="#20ba00" d="M2.924,8.621c1.743,1.5,4.281,3.785,4.281,3.785s5.843-6.888,11.369-10.204L19,3.359c-2.009,1.274-8.079,8.256-10.458,14.438c0,0-6.335-6.262-7.542-7.688L2.924,8.621L2.924,8.621z"/></svg>'});Vue.component("payment-select-svg-b",{template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><path fill="#fff" d="M2.924,8.621c1.743,1.5,4.281,3.785,4.281,3.785s5.843-6.888,11.369-10.204L19,3.359c-2.009,1.274-8.079,8.256-10.458,14.438c0,0-6.335-6.262-7.542-7.688L2.924,8.621L2.924,8.621z"/></svg>'});Vue.component("unselect-svg",{template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" enable-background="new 0 0 20 20" xml:space="preserve"><polygon fill="#BDBDBD" points="11.904,10.001 12.266,9.638 17,4.903 15.096,3 10.363,7.734 9.999,8.098 9.635,7.734 4.9,3 3,4.903  7.734,9.638 8.096,10.001 7.734,10.363 3,15.096 4.9,17 9.635,12.266 9.999,11.903 10.363,12.266 15.096,17 17,15.096  12.266,10.363"/></svg>'});Vue.component("tip-svg",{props:["data"],template:'<div ref="tip" class="c-package__tip">'+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="16px" height="16px" viewBox="0 0 16 16"><path fill="#A9A9A9" d="M13.649,2.343c-2.286-2.288-5.726-2.973-8.713-1.734C1.948,1.848,0,4.764,0,8\tc0,3.236,1.948,6.152,4.936,7.391s6.427,0.554,8.713-1.734C15.154,12.158,16,10.123,16,8C16,5.876,15.154,3.841,13.649,2.343\tL13.649,2.343z M9.062,12.25H6.928V6.97h2.133V12.25z M7.995,6.081c-0.473,0-0.899-0.285-1.08-0.722\tc-0.181-0.437-0.081-0.94,0.254-1.275C7.503,3.75,8.007,3.649,8.443,3.831c0.438,0.182,0.721,0.608,0.721,1.082\tc0,0.31-0.123,0.607-0.343,0.827S8.305,6.081,7.995,6.081z"/></svg>'+'<div ref="tipPanel" class="c-package__tip-panel"><p class="u-text-center"><span>{{data}}</span></p></div></div>',mounted:function(){var packageTip=this.$refs.tip;var tipPanel=this.$refs.tipPanel;var $tipPanel=jQuery(tipPanel);jQuery(packageTip).hover(function(){$tipPanel.removeClass("active");$tipPanel.show();var innerWidth=jQuery(window).innerWidth();var $right=$tipPanel.offset().left+$tipPanel.outerWidth();if($right>innerWidth){$tipPanel.addClass("active")}},function(){$tipPanel.hide()})}});Vue.component("btn-animate",{template:'<div class="loader u-animate"><div class="loader-inner ball-pulse"><div></div><div></div><div></div></div></div>'});Vue.component("canvas-item",{props:["data"],template:'<div class="swiper-slide" ><div class="c-package__preview-image"><img ref="slideItem1" src="" alt=""></div><div class="c-package__preview-image"><img ref="slideItem2" src="" alt=""></div></div>',mounted:function(){this.updatePreview()},updated:function(){this.updatePreview()},methods:{updatePreview:function(){var c1=this.$refs.slideItem1;var c2=this.$refs.slideItem2;c1.src=this.data[0];c2.src=this.data[1]}}});Vue.component("arrow-svg",{props:["data"],template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="22px" height="22px" viewBox="0 0 22 22"> <path fill="#D8D8D8" d="M7.176,11l9.55,9.427c0.365,0.36,0.365,0.942,0,1.304c-0.365,0.359-0.957,0.359-1.322,0L5.263,11.722C5.062,11.525,4.982,11.26,5.003,11c-0.021-0.258,0.059-0.523,0.259-0.721l10.14-10.008c0.367-0.361,0.957-0.361,1.322,0c0.366,0.359,0.366,0.943,0,1.303L7.176,11L7.176,11z"/> </svg>'});Vue.component("swiper-item",{props:["canvas"],template:'<div class="swiper-container">'+'<div class="swiper-wrapper"><canvas-item v-for="canva in canvas" :data="canva" :key="canva.id"></canvas-item></div>'+'<div class="swiper-pagination"></div>'+'<div class="swiper-button-next"><arrow-svg></arrow-svg></div>'+'<div class="swiper-button-prev"><arrow-svg></arrow-svg></div>'+"</div>",mounted:function(){setTimeout(function(){var swiper=new Swiper(".swiper-container",{slidesPerView:1,spaceBetween:30,loop:true,autoplay:{delay:5e3,disableOnInteraction:false},pagination:{el:".swiper-pagination",clickable:true},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})},300)}});Vue.component("package-td",{props:["data","tips","index","currency"],template:'<div class="c-package__plan-item">'+'<div class="c-package__item-title" :class="[titleStyleClass]"><plus-svg v-if="index==2" style="position: absolute; right: -1px; top: -33px;"></plus-svg>'+"<h3>{{data.title}}</h3>"+'<p v-if="(index==0)" class="test_a_p">{{data.giveCredit}}</p>'+'<p v-if="index!=0" class="c-package__item-price"><span :class="{hide:notShowUSD}"><sup>$</sup></span><span>{{price}}</span><span>&nbsp;{{currencyCode}}</span><span><span :class="{hide:notShowUSD}">$</span>{{oldPrice}}{{currencyCode}}</span></p>'+'<p v-if="index!=0" class="c-package__once-time">{{data.oneTime}}</p>'+"</div>"+'<button @click="_toPaymentPage(index)" class="u-de-btn" :class="[data.btnClass]">{{data.btnInfo}}</button>'+'<a v-if="index!=0" class="u-de-a" @click="_downloadSample">{{data.downloadSample}}</a>'+"</div>",data:function(){return{webUrl:currentWebUrl,sampleUrl:null,currencySymbol:currencySymbol,titleStyleClass:currencyCode==="USD"||this.index===0?"":"style-two"}},computed:{notShowUSD:function(){return this.currencyCode!="USD"},currencyCode:function(){if(this.currency==0)return"USD";else return currencyCode},price:function(){if(this.currency==0)return this.data.price;else return this.data.exPrice},oldPrice:function(){if(this.currency==0)return this.data.oldPrice;else return this.data.oldExPrice}},mounted:function(){var url=this.webUrl+"/download/basic/logo.zip";if(this.data.type==="Plus"){url=this.webUrl+"/download/plus/logo.zip"}this.sampleUrl=url},methods:{_toPaymentPage:function(index){DEPackage.toPayment(index)},_downloadSample:function(){this._downZipFile(this.sampleUrl)},_downZipFile:function(url){window.isDownloadSample=true;var $eleForm=jQuery("<form method='get'></form>");$eleForm.attr("action",url);jQuery(document.body).append($eleForm);$eleForm.submit();$eleForm.remove();setTimeout(function(){window.isDownloadSample=false},50)}}});Vue.component("package-item",{props:["data","tips","index","currency"],template:'<div class="c-package__plan-item" :class="hideClass">'+'<div class="c-package__item-title" :class="[titleStyleClass]"><plus-svg v-if="index==2"></plus-svg>'+"<h3>{{data.title}}</h3>"+'<p v-if="(index==0)" class="test_a_p">{{data.giveCredit}}</p>'+'<p v-if="index!=0" class="c-package__item-price"><span :class="{hide:notShowUSD}"><sup>$</sup></span><span>{{price}}</span><span>&nbsp;{{currencyCode}}</span><span><span :class="{hide:notShowUSD}">$</span>{{oldPrice}}{{currencyCode}}</span></p>'+'<p v-if="index!=0" class="c-package__once-time">{{data.oneTime}}</p>'+"</div>"+'<button @click="_toPaymentPage(index)" class="u-de-btn" :class="[data.btnClass]">{{data.btnInfo}}</button>'+'<a v-if="index!=0" class="u-de-a" @click="_downloadSample">{{data.downloadSample}}</a>'+"<ul>"+'<li v-for="(item,index) in data.tipItems">'+'<select-svg></select-svg><span class="c-package__item-tip">{{item.title}}<span class="c-package__tip-span" v-if="item.tip"><tip-svg :data="item.tip"></tip-svg></span></span>'+"</li>"+"</ul>"+"</div>",data:function(){return{webUrl:currentWebUrl,sampleUrl:null,currencySymbol:currencySymbol,titleStyleClass:currencyCode==="USD"||this.index===0?"":"style-two"}},computed:{hideClass:function(){return this.data.isShow?"":"u-hide-important"},notShowUSD:function(){return this.currencyCode!="USD"},currencyCode:function(){if(this.currency==0)return"USD";else return currencyCode},price:function(){if(this.currency==0)return this.data.price;else return this.data.exPrice},oldPrice:function(){if(this.currency==0)return this.data.oldPrice;else return this.data.oldExPrice}},mounted:function(){var url=this.webUrl+"/download/basic/logo.zip";if(this.data.type==="Plus"){url=this.webUrl+"/download/plus/logo.zip"}this.sampleUrl=url},methods:{_toPaymentPage:function(index){var plan=DEPackage.plan;if(plan==="basic"&&index===1){return}if(plan==="free"&&index===0&&isAppUpgrade){return}if(index===0){if(this.isPackageA)gaEvent(this.openSource,"choose_package_crt_a","free");else gaEvent(this.openSource,"choose_package_crt_b","free");if(loginStatus){jQuery(window).scrollTop(0);DEPackage.showAppHidePackage();if(DEPackage.showDownloadPanel){DEPackage.showDownloadPanel()}}else{PanelFunc.signupClick();window.packageLoginCallback=function(){jQuery(window).scrollTop(0);DEPackage.showAppHidePackage();if(DEPackage.showDownloadPanel){DEPackage.showDownloadPanel()}}}}else{DEPayment.paymentInfo=packageData[index];if(plan==="basic"){DEPayment.paymentInfo={title:localPayment["plus"],type:"upgrade",price:upgradePrice.price,oldPrice:upgradePrice.oldPrice,exPrice:upgradePrice.exPrice,count:8,btnInfo:"Choose",btnClass:"green-btn",isShow:true,tipItems:packageData[2].tipItems}}if(loginStatus){DEPayment.showPaymentPage()}else{PanelFunc.signupClick();window.packageLoginCallback=DEPayment.showPaymentPage}var plan="free";if(index!==0){plan=index===1?"basic":"plus"}if(this.isPackageA)gaEvent(DEPackage.openSource,"choose_package_crt_a",plan);else gaEvent(DEPackage.openSource,"choose_package_crt_b",plan)}},_downloadSample:function(){this._downZipFile(this.sampleUrl)},_downZipFile:function(url){window.isDownloadSample=true;var $eleForm=jQuery("<form method='get'></form>");$eleForm.attr("action",url);jQuery(document.body).append($eleForm);$eleForm.submit();$eleForm.remove();setTimeout(function(){window.isDownloadSample=false},50)}}});Vue.component("payment-describe",{props:["data","local"],template:'<div class="c-payment__describe">'+'<div class="c-payment__describe-content" :class="[describeStyleClass]">'+'<h3>{{local["get-payment"]}}</h3>'+"<ul>"+'<li v-for="(item,index) in data.tipItems">'+"<payment-select-svg-b></payment-select-svg-b><span>{{item.title}}</span>"+"</li>"+"</ul>"+'<div class="c-payment__coupon" :class="{active:isShowCoupon}">'+'<a v-if="!isSuccess" style="font-size: 17px; color:#fff" class="u-de-a" @click="_toggleCoupon">{{local["coupon"]}}</a>'+'<p style="color: #2AC5B3;font-size: 17px;" v-if="isSuccess">{{local["coupon-success"]}}</p>'+'<div v-if="isShowCoupon" class="c-payment__coupon-content">'+'<input type="text" v-model="couponCode" @keydown="_keyRedeemCoupon" :placeholder="local.couponCode">'+'<button class="u-de-btn green-btn" @click="_redeemCoupon">'+'<span v-if="!isShowAnimate">{{local["redeem"]}}</span>'+'<btn-animate v-if="isShowAnimate"></btn-animate></button>'+"</div>"+'<p v-if="isShowCoupon && isError">{{local["coupon-failed"]}}</p>'+"</div>"+'<p class="c-payment__total"><span>{{local["total"]}}</span>'+'<span class="u-de-fr">${{price}}<span style="font-size: 21px">&nbsp;USD</span><span class="c-payment__old-price u-de-fr u-de-line-m">${{data.oldPrice}}USD</span></span>'+'<span class="u-de-fr" v-if="isShowExPrice">{{exPrice}}<span style="font-size: 18px">&nbsp;{{currencyCode}}</span>&nbsp;=&nbsp;</span></p>'+"</div></div>",data:function(){return{couponCode:null,couponCodeTip:null,isShowCoupon:false,isError:false,isSuccess:false,isShowAnimate:false,price:null,exPrice:null,currencyCode:currencyCode,currencySymbol:currencySymbol,isShowExPrice:false,describeStyleClass:""}},methods:{initData:function(){this.isSuccess=false;this.isError=false;this.isShowCoupon=false;this.couponCode=null;var coupon=this.$refs.coupon;if(!jQuery(coupon).hasClass("active")){jQuery(coupon).addClass("active")}var price=DEPayment.paymentInfo.price;this.price=price;this.exPrice=geoplugin_currencyConverter(price);DEPayment.price=price},_toggleCoupon:function(){this.isShowCoupon=!this.isShowCoupon},_redeemCoupon:function(){var coupon=this.couponCode;this.isShowAnimate=true;jQuery.ajax({type:"GET",url:DEPayment.webUrl+"index.php?option=com_project&task=payment.redeemCoupon",data:{coupon:coupon},success:function(respon){respon=respon.substring(respon.lastIndexOf("{'"));var obj=new Function("return"+respon)();if(obj.result===true){var couponInfo=JSON.parse(obj.content);var price=this.data.price;if(couponInfo.amountOff){price-=couponInfo.amountOff}else{price*=couponInfo.percentOff}if(price<=0){DEPayment.paymentShowInfo={payBtn:localPayment["download-now"],processing:localPayment["processing"]};DEPayment.isShowPay=0;price=0}price=price.toFixed(2);this._setPaymentInfo(price,couponInfo.coupon);this._toggleCoupon();this.isSuccess=true}else{this.isError=true}this.isShowAnimate=false}.bind(this),error:function(){this.isShowAnimate=false}.bind(this)})},_keyRedeemCoupon:function(event){if(event.keyCode===13){this._redeemCoupon()}},_setPaymentInfo:function(price,coupon){DEPayment.price=price;DEPayment.coupon=coupon;this.price=price;this.exPrice=geoplugin_currencyConverter(price)}}});Vue.component("back-head",{props:["title","desc_pre","desc_mid","desc_sub","func","back","currency","select_title","show_package_free","package_free","package_free_tip1","package_free_tip2"],data:function(){return{currencyCode:currencyCode}},template:'<div class="de-back-describe">'+'<div @click="func" class="u-de-btn de-back-btn">'+'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30px" height="30px" viewBox="-0.5 -0.5 30 30"><circle fill="#2AC5B3" cx="14.5" cy="14.5" r="14"/><path fill="#FFFFFF" d="M7.366,15.828c-0.491-0.486-0.487-1.275,0.008-1.762l6.791-6.676c1.184-1.183,2.959,0.592,1.775,1.775l-3.961,3.961c-0.326,0.326-0.216,0.59,0.249,0.59h9.518c0.692,0,1.255,0.562,1.255,1.255c0,0.693-0.562,1.255-1.255,1.255h-9.518c-0.463,0-0.575,0.264-0.249,0.59l3.961,3.961c1.184,1.184-0.592,2.957-1.775,1.774L7.366,15.828z"/></svg>'+"{{back}}"+"</div>"+'<h3 class="de-describe-h3">{{title}}</h3>'+'<p v-if="select_title" class="de-describe-p">{{desc_pre}}<span><svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="12px" height="6px" viewBox="0 0 12 6" enable-background="new 0 0 12 6" xml:space="preserve"><path fill="#FFFFFF" d="M10.68,2.872c-0.164-0.164-0.358-0.281-0.576-0.35c0.066-0.107,0.263-0.42,0.263-0.42c0.074-0.119,0.108-0.251,0.108-0.381c0-0.24-0.118-0.474-0.336-0.611l-0.26-0.161C9.764,0.876,9.631,0.838,9.496,0.838c-0.054,0-0.105,0.006-0.16,0.019C9.232,0.881,9.137,0.928,9.053,0.992C9.02,0.949,8.984,0.907,8.946,0.868C8.674,0.586,8.312,0.437,7.897,0.437c-0.409,0-0.769,0.147-1.041,0.424C6.83,0.887,6.807,0.915,6.782,0.942c-0.247-0.256-0.65-0.503-1.295-0.503c-0.515,0-0.877,0.159-1.128,0.356C4.229,0.61,4.013,0.488,3.771,0.488H1.935c-0.369,0-0.678,0.279-0.716,0.646L1.035,2.923C1.033,2.946,1.032,2.972,1.032,2.995c0,0.123,0.031,0.238,0.086,0.342C1.11,3.345,1.102,3.354,1.092,3.362c-0.121,0.135-0.188,0.309-0.188,0.49c0,0.021,0,0.041,0.002,0.063C0.95,4.406,1.153,4.822,1.49,5.121l0,0c0.334,0.293,0.755,0.441,1.25,0.441c0.701,0,1.127-0.297,1.36-0.547c0.013-0.012,0.023-0.023,0.035-0.037c0.24,0.285,0.658,0.584,1.356,0.584c0.789,0,1.222-0.379,1.443-0.693c0.053-0.074,0.1-0.156,0.142-0.24c0.055,0.137,0.151,0.258,0.286,0.342L7.62,5.133c0.117,0.072,0.25,0.109,0.384,0.109c0.055,0,0.106-0.006,0.16-0.018c0.131-0.031,0.248-0.098,0.344-0.188C8.541,5.078,8.575,5.113,8.612,5.15c0.274,0.271,0.632,0.412,1.034,0.412c0.404,0,0.764-0.146,1.037-0.422c0.271-0.271,0.412-0.633,0.412-1.037V3.932C11.098,3.512,10.952,3.145,10.68,2.872z"/><path fill="#EF9D00" d="M2.212,2.606c0.175-0.104,0.375-0.154,0.598-0.154c0.327,0,0.586,0.107,0.778,0.322c0.191,0.217,0.288,0.508,0.288,0.875c0,0.369-0.101,0.66-0.3,0.873c-0.198,0.213-0.477,0.32-0.835,0.32c-0.315,0-0.574-0.088-0.774-0.264C1.767,4.4,1.653,4.16,1.624,3.848h0.43c0.027,0.207,0.101,0.363,0.22,0.465c0.117,0.105,0.274,0.158,0.467,0.158c0.211,0,0.378-0.072,0.499-0.217c0.121-0.146,0.182-0.345,0.182-0.6c0-0.239-0.065-0.431-0.195-0.577C3.094,2.933,2.921,2.86,2.704,2.86c-0.197,0-0.354,0.043-0.467,0.131L2.116,3.089L1.752,2.995l0.182-1.787h1.836v0.421H2.321L2.212,2.606L2.212,2.606z M6.346,4.453C6.164,4.713,5.88,4.842,5.492,4.842c-0.382,0-0.665-0.127-0.849-0.381C4.46,4.209,4.364,3.829,4.358,3.325V2.718c0-0.527,0.091-0.919,0.273-1.174c0.182-0.257,0.467-0.385,0.856-0.385c0.386,0,0.669,0.124,0.853,0.371c0.181,0.246,0.274,0.627,0.279,1.143v0.59C6.619,3.796,6.529,4.191,6.346,4.453L6.346,4.453z M6.164,2.642c0-0.387-0.054-0.667-0.162-0.844c-0.108-0.176-0.28-0.265-0.515-0.265c-0.232,0-0.402,0.088-0.509,0.264c-0.107,0.175-0.162,0.446-0.165,0.81v0.729c0,0.387,0.056,0.674,0.168,0.857c0.113,0.186,0.283,0.277,0.511,0.277c0.226,0,0.393-0.088,0.5-0.262c0.11-0.174,0.167-0.447,0.172-0.823V2.642L6.164,2.642z M10.172,4.637C10.034,4.773,9.86,4.844,9.647,4.844c-0.214,0-0.39-0.068-0.529-0.205c-0.139-0.137-0.21-0.32-0.21-0.547V3.913c0-0.216,0.068-0.392,0.205-0.529c0.139-0.141,0.313-0.209,0.527-0.209c0.216,0,0.392,0.068,0.529,0.207c0.139,0.138,0.207,0.32,0.207,0.55v0.174C10.377,4.318,10.31,4.498,10.172,4.637L10.172,4.637z M10.035,3.911c0-0.13-0.033-0.236-0.105-0.317C9.857,3.512,9.762,3.47,9.643,3.47c-0.117,0-0.213,0.042-0.284,0.124c-0.073,0.079-0.11,0.19-0.11,0.327v0.185c0,0.129,0.036,0.236,0.108,0.318c0.071,0.084,0.169,0.125,0.291,0.125c0.118,0,0.212-0.041,0.282-0.121c0.07-0.082,0.104-0.193,0.104-0.332L10.035,3.911L10.035,3.911z M7.746,4.357l1.75-2.8l0.26,0.162l-1.75,2.8L7.746,4.357L7.746,4.357z M7.902,2.823c-0.213,0-0.391-0.068-0.529-0.205c-0.14-0.139-0.209-0.32-0.209-0.549V1.897c0-0.215,0.069-0.392,0.206-0.531c0.136-0.139,0.312-0.209,0.527-0.209c0.218,0,0.396,0.07,0.53,0.21c0.136,0.14,0.203,0.322,0.203,0.546v0.174c0,0.217-0.068,0.393-0.207,0.531C8.287,2.755,8.113,2.823,7.902,2.823L7.902,2.823zM8.289,1.896c0-0.128-0.033-0.234-0.104-0.319C8.113,1.494,8.019,1.453,7.897,1.453S7.68,1.494,7.609,1.577C7.539,1.662,7.504,1.77,7.504,1.906v0.181c0,0.127,0.035,0.232,0.107,0.316C7.684,2.485,7.78,2.528,7.902,2.528c0.116,0,0.21-0.041,0.282-0.121c0.071-0.08,0.104-0.191,0.104-0.33V1.896L8.289,1.896z"/></svg></span>{{desc_sub}}</p>'+'<div v-if="show_package_free" class="de-package-free"><a @click="downloadFree()">{{package_free}}</a><div><info-svg></info-svg><div class="de-package-free-tip-panel"><ul><li><div></div>{{package_free_tip1}}</li><li><div></div>{{package_free_tip2}}</li></ul></div></div></div>'+'<div v-if="select_title && !isUSD" class="de-currency-dropdown dropdown" :class="currencyClass">'+"  <p><span>{{select_title}}:</span>"+'  <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">'+'    <span id="currency">USD</span>'+'    <span class="caret"></span>'+"  </button>"+'  <ul class="dropdown-menu">'+'    <li><a href="javascript::void()" @click="chooseCurrency(0)">USD</a></li>'+'    <li><a href="javascript::void()" @click="chooseCurrency(1)">{{currencyCode}}</a></li>'+"  </ul></p>"+"</div>"+"</div>",computed:{isUSD:function(){return this.currencyCode=="USD"},currencyClass:function(){return ABTestType=="B"?"de-currency-dropdown_b":""}},methods:{downloadFree:function(){DEPackage.toPayment(0)},chooseCurrency:function(currency){var title=currencyCode;if(currency==0)title="USD";jQuery("#currency").html(title);DEPackage.changeCurrency(currency)}}});if(paymentType=="A"){jQuery(".c-payment-b").remove()}else{jQuery(".c-payment").remove()}var DEPayment=new Vue({el:paymentType=="A"?".c-payment":".c-payment-b",data:{local:localPayment,webUrl:currentWebUrl+"/",paymentInfo:packageData[1],projectData:null,paymentShowInfo:{payBtn:localPayment["pay-download"],processing:localPayment["processing-payment"]},isShowPay:1,errorStatus:{isCardNameError:false,isCardError:false,isPaymentError:false},paymentCallback:null,paymentErrorInfo:localPayment["errorTipInfo"].expInfo,errorTipInfo:localPayment["errorTipInfo"],pageTitle:localPayment["checkout"],safeData:localPayment["safe-data"],evaluationData:localPayment["evaluation-data"],isShowAnimate:false,price:null,coupon:null,cardInfo:{cardNumber:"",cardExpiration:"",cardCVC:"",cardName:""},isFreeLogo:false,isA:paymentType=="A"?true:false,logo:null,couponCode:null,couponCodeTip:null,isShowCoupon:false,isError:false,isSuccess:false,isShowAnimate:false,exPrice:null,currencyCode:currencyCode,currencySymbol:currencySymbol,isShowExPrice:false,describeStyleClass:""},methods:{showPackageHidePayment:function(){jQuery(DEPackage.$el).show();jQuery(DEPayment.$el).hide();jQuery(window).scrollTop(0)},switchPaymentType:function(type){if(type=="paypal"){jQuery(".c-payment__credit").hide();jQuery(".c-payment__paypal").show();jQuery('div[name="card"]')[0].className="c-payment__radio";jQuery('div[name="paypal"]')[0].className="c-payment__radio c-payment__radio-checked"}else{jQuery(".c-payment__paypal").hide();jQuery(".c-payment__credit").show();jQuery('div[name="card"]')[0].className="c-payment__radio c-payment__radio-checked";jQuery('div[name="paypal"]')[0].className="c-payment__radio"}},enterToPay:function(e){if(e.keyCode===13){this.toPay()}},showPaymentPage:function(){jQuery(window).scrollTop(0);jQuery(DEPayment.$el).show();jQuery(DEPackage.$el).hide();this.initCardInfo();this.initPaymentInfo();if(window.packageLoginCallback){window.packageLoginCallback=null}gaPage("payment/checkout/");if(this.isA)gaEvent("enter_checkout","A","");else gaEvent("enter_checkout","B","")},toPay:function(type){if(!loginStatus){PanelFunc.signupClick();return}if(this.isShowAnimate)return;if(DEPayment.price<=0){this._freePay();return}if(type=="card")this.stripePay();else if(type=="paypal")this.paypalPay()},paypalPay:function(){this.isShowAnimate=true;var plan=this.paymentInfo.type;jQuery("#pp_payment").attr("href","/?option=com_project&task=payment.checkoutWithPayPal&plan="+plan+"&coupon="+this.coupon);document.getElementById("pp_payment").click()},stripePay:function(){this.errorStatus={isCardError:false,isPaymentError:false};this.isShowAnimate=true;var paymentObj=jQuery.payment;var validateCardNumber=paymentObj.validateCardNumber(this.cardInfo.cardNumber),cardExpiryVal=paymentObj.cardExpiryVal(this.cardInfo.cardExpiration),validateCardExpiry=paymentObj.validateCardExpiry(cardExpiryVal.month,cardExpiryVal.year),validateCardCVC=paymentObj.validateCardCVC(this.cardInfo.cardCVC);if(!this.cardInfo.cardName){this.errorStatus.isCardNameError=true;this.isShowAnimate=false;return}if(!validateCardNumber){this.errorStatus.isCardError=true;this.isShowAnimate=false;return}if(!validateCardExpiry){this.errorStatus.isPaymentError=true;this.paymentErrorInfo=this.errorTipInfo.expInfo;this.isShowAnimate=false;return}if(!validateCardCVC){this.errorStatus.isPaymentError=true;this.paymentErrorInfo=this.errorTipInfo.cvcInfo;this.isShowAnimate=false;return}Stripe.card.createToken({number:this.cardInfo.cardNumber,cvc:this.cardInfo.cardCVC,exp_month:cardExpiryVal.month,exp_year:cardExpiryVal.year,name:this.cardInfo.cardName},this.stripeResponseHandler)},stripeResponseHandler:function(status,response){if(response.error){this.isShowAnimate=false;this.paymentFailed(response.error.message)}else{var token=response.id;this.doPay(token)}},_uploadProject:function(token,payer){var data;var url;if(this.key){url="/index.php?option=com_project&task=project.updateProjectInfo";data={projectData:JSON.stringify(this.projectData?this.projectData.data:null),base64:this.projectData?this.projectData.base64:null,key:this.key}}else{url="/index.php?option=com_project&task=project.uploadProject";data={projectJson:JSON.stringify(this.projectData?this.projectData.data:null),base64:this.projectData?this.projectData.base64:null}}jQuery.ajax({type:"POST",url:url,data:data,success:function(respon){var result=false;if(respon.toLowerCase()=="success"||respon.toLowerCase()=="fail"){result=respon.toLowerCase()=="success"}else{respon=respon.substring(respon.lastIndexOf("{'"));var obj=new Function("return"+respon)();result=obj.result;if(result)this.key=obj.key}if(result){this._pay(token,payer)}else{this.paymentFailed("Payment failed!");this.isShowAnimate=false}}.bind(this),error:function(){this.isShowAnimate=false;this.paymentFailed("Payment failed!")}.bind(this)})},_pay:function(token,payer){var plan=this.paymentInfo.type;var data={token:token,payer:payer,plan:plan,key:this.key,price:this.price,coupon:this.coupon?this.coupon:null};var url=null;if(payer){url="/index.php?option=com_project&task=payment.upgradeProjectWithPayPal"}else{url="/index.php?option=com_project&task=payment.upgradeProjectWithCard"}jQuery.ajax({type:"POST",url:url,data:data,success:function(respon){respon=respon.substring(respon.lastIndexOf("{'"));var obj=new Function("return"+respon)();if(obj.result==true){var label="upgrade";if(isAppUpgrade){gaPage("payment/success_upgrade/")}else if(plan==="Basic"){gaPage("payment/success_basic/");label="basic"}else{gaPage("payment/success_plus/");label="plus"}if(DEPackage.isPackageA)gaEvent("checkout","A",label);else gaEvent("checkout","B",label);if(this.paymentCallback)this.paymentCallback({result:true,plan:plan,key:obj.key});DEPaymentSuccess.updateAffiliate(obj.price,obj.transactionID);DEPaymentSuccess.isUpgrade=isAppUpgrade;DEPaymentSuccess.key=obj.key;this.key=obj.key;this._showPaymentSuccess(plan)}else{this.paymentFailed("Payment failed! "+obj.error)}this.isShowAnimate=false}.bind(this),error:function(){this.isShowAnimate=false;this.paymentFailed("Payment failed!")}.bind(this)})},doPay:function(token,payer){this.isShowAnimate=true;if(this.projectData)this._uploadProject(token,payer);else if(this.key)this._pay(token,payer);else this.isShowAnimate=false},paymentFailed:function(error){this.errorStatus.isPaymentError=true;if(error&&error.length>104){error="Payment failed! Please check your card information and try again."}this.isShowAnimate=false;this.paymentErrorInfo=error},setPaymentCallback:function(func){this.paymentCallback=func},formatNumber:function(){var value=this.cardInfo.cardNumber;this.cardInfo.cardNumber=this._formatNumber(value)},formatExpiration:function(){var value=this.cardInfo.cardExpiration;this.cardInfo.cardExpiration=jQuery.payment.formatExpiry(value)},formatCVC:function(){var value=this.cardInfo.cardCVC;this.cardInfo.cardCVC=value.length>4?value.substring(0,4):value},initCardInfo:function(){this.cardInfo={cardNumber:"",cardExpiration:"",cardCVC:"",cardName:""};this.errorStatus={isCardNameError:false,isCardError:false,isPaymentError:false}},initPaymentInfo:function(){this.logo=DEPackage.logo;this.paymentShowInfo={payBtn:localPayment["pay-download"],processing:localPayment["processing-payment"]};this.isShowPay=1;var paymentDescribe=this.$refs.paymentDescribe;if(paymentDescribe){paymentDescribe.initData()}if(this.isA)this.initData();DEPayment.coupon=null},_freePay:function(){console.log("free");var plan=this.paymentInfo.type;var data={plan:plan,project:JSON.stringify(this.projectData?this.projectData.data:null),base64:this.projectData?this.projectData.base64:null,key:this.key?this.key:null,price:this.price,coupon:this.coupon?this.coupon:null};this.isShowAnimate=true;jQuery.ajax({type:"POST",url:this.webUrl+"index.php?option=com_project&task=payment.buyProjectWithFree",data:data,success:function(respon){respon=respon.substring(respon.lastIndexOf("{'"));var obj=new Function("return"+respon)();if(obj.result==true){if(this.paymentCallback)this.paymentCallback({result:true,plan:plan,key:obj.key});DEPaymentSuccess.isUpgrade=isAppUpgrade;DEPaymentSuccess.key=obj.key;this._showPaymentSuccess(plan)}else{this.paymentFailed("Payment failed! "+obj.error)}this.isShowAnimate=false}.bind(this),error:function(){this.isShowAnimate=false;this.paymentFailed()}.bind(this)})},_showPaymentSuccess:function(plan){jQuery(window).scrollTop(0);jQuery(DEPaymentSuccess.$el).show();jQuery(DEPayment.$el).hide()},_formatNumber:function(value){value=value.replace(/\s*/g,"");value=value.length>16?value.substring(0,16):value;var result=[];for(var i=0;i<value.length;i++){if(i%4==0&&i!=0){result.push(" "+value.charAt(i))}else{result.push(value.charAt(i))}}return result.join("")},initData:function(){this.isSuccess=false;this.isError=false;this.isShowCoupon=false;this.couponCode=null;var coupon=this.$refs.coupon;if(!jQuery(coupon).hasClass("active")){jQuery(coupon).addClass("active")}var price=this.paymentInfo.price;this.price=price;this.exPrice=geoplugin_currencyConverter(price)},_toggleCoupon:function(){this.isShowCoupon=!this.isShowCoupon},_redeemCoupon:function(){var coupon=this.couponCode;this.isShowAnimate=true;jQuery.ajax({type:"GET",url:this.webUrl+"index.php?option=com_project&task=payment.redeemCoupon",data:{coupon:coupon},success:function(respon){respon=respon.substring(respon.lastIndexOf("{'"));var obj=new Function("return"+respon)();if(obj.result===true){var couponInfo=JSON.parse(obj.content);var price=this.price;if(couponInfo.amountOff){price-=couponInfo.amountOff}else{price*=couponInfo.percentOff}if(price<=0){this.paymentShowInfo={payBtn:localPayment["download-now"],processing:localPayment["processing"]};this.isShowPay=0;price=0}price=price.toFixed(2);this._setPaymentInfo(price,couponInfo.coupon);this._toggleCoupon();this.isSuccess=true}else{this.isError=true}this.isShowAnimate=false}.bind(this),error:function(){this.isShowAnimate=false}.bind(this)})},_keyRedeemCoupon:function(event){if(event.keyCode===13){this._redeemCoupon()}},_setPaymentInfo:function(price,coupon){this.price=price;this.coupon=coupon;this.exPrice=geoplugin_currencyConverter(price)}}});var DEPackage=new Vue({el:".c-package",data:{local:localPayment,packageData:packageData,pageTitle:localPayment["package-offer-title"],packCurrency:0,packageFAQs:packageFAQs,webUrl:currentWebUrl+"/",plan:null,isUpgrade:false,isA:ABTestType==="A"?true:false,isPackageA:packageType==="A"?true:false,previewImages:null,logo:null,openSource:"free"},computed:{abTestClass:function(){return this.isA?"test_a":"test_b"},upgradeClass:function(){if(this.isPackageA)return"upgrade";return this.packageData[0].isShow?"":"upgrade"},showFreePackageInHead:function(){if(!this.isPackageA)return false;if(this.isUpgrade)return false;return true}},methods:{showAppHidePackage:function(){this.showApp();jQuery(DEPackage.$el).hide();if(window.packageLoginCallback){window.packageLoginCallback=null}},changeCurrency:function(currency){this.packCurrency=currency},showApp:function(){if(!isAppUpgrade)jQuery(".fb-like").show();jQuery("body").css({overflow:"hidden"}).scrollTop(0).attr("onselectstart","return false;");jQuery("#login-module").hide();jQuery(".menu_bg").css({zIndex:0});jQuery(".height_86").hide();jQuery("#designevo").show()},showPackagePage:function(data){if(data){this.plan=data.plan}gaPage("payment/package/");this.openSource="free";if(this.isUpgrade&&!DEPayment.isFreeLogo){this.openSource="basic"}jQuery(".height_86").show();if(!this.isUpgrade){if(this.isPackageA)gaEvent("enter_package",this.openSource,"choose_package_crt_a");else gaEvent("enter_package",this.openSource,"choose_package_crt_b")}},freeUpgrade:function(){this.resetPackage();var data=this.packageData[0];data.isShow=true;this.$set(this.packageData,0,data);this.packageData[0].btnInfo=localPayment["current-package"];this.packageData[0].btnClass="gray-btn";if(this.isA){jQuery("#btnFree").html(localPayment["current-package"]);jQuery("#btnFree").removeClass("yellow-btn").addClass("gray-btn")}this.isUpgrade=true;DEPayment.isFreeLogo=true},basicUpgrade:function(){this.resetPackage();var data=this.packageData[0];data.isShow=false;this.$set(this.packageData,0,data);if(!this.isA){jQuery(".de-currency-dropdown").css({right:"240px"})}this.packageData[1].btnInfo=localPayment["current-package"];this.packageData[1].btnClass="gray-btn";var price=currencySymbol+upgradePrice.price+" USD";this.packageData[2].btnInfo=localPayment["upgrade-plus"].replace("%s",price);if(this.isA){jQuery("#btnBasic").html(localPayment["current-package"]);jQuery("#btnBasic").removeClass("yellow-btn").addClass("gray-btn");jQuery("#btnPlus").html(this.packageData[2].btnInfo)}this.isUpgrade=true;DEPayment.isFreeLogo=false},toPayment:function(index){var plan=DEPackage.plan;if(plan==="basic"&&index===1){return}if(plan==="free"&&index===0&&isAppUpgrade){return}if(index===0){if(!this.isUpgrade){if(this.isPackageA)gaEvent(this.openSource,"choose_package_crt_a","free");else gaEvent(this.openSource,"choose_package_crt_b","free")}if(loginStatus){jQuery(window).scrollTop(0);DEPackage.showAppHidePackage();if(DEPackage.showDownloadPanel){DEPackage.showDownloadPanel()}}else{PanelFunc.signupClick();window.packageLoginCallback=function(){jQuery(window).scrollTop(0);DEPackage.showAppHidePackage();if(DEPackage.showDownloadPanel){DEPackage.showDownloadPanel()}}}}else{DEPayment.paymentInfo=packageData[index];if(plan==="basic"){DEPayment.paymentInfo={title:localPayment["plus"],type:"upgrade",price:upgradePrice.price,oldPrice:upgradePrice.oldPrice,exPrice:upgradePrice.exPrice,count:8,btnInfo:"Choose",btnClass:"green-btn",isShow:true,tipItems:packageData[2].tipItems}}if(loginStatus){DEPayment.showPaymentPage()}else{PanelFunc.signupClick();window.packageLoginCallback=DEPayment.showPaymentPage}var plan="free";if(index!==0){plan=index===1?"basic":"plus"}if(!this.isUpgrade){if(this.isPackageA)gaEvent(this.openSource,"choose_package_crt_a",plan);else gaEvent(this.openSource,"choose_package_crt_b",plan)}}},updatePreviewInfo:function(logo,data){this.previewImages=null;this.logo=null;setTimeout(function(){this.logo=logo;if(logo&&data&&data.length>=6){this.previewImages=[[logo,data[0]],[data[1],data[3]],[data[4],data[5]]]}}.bind(this),100)},resetPackage:function(){this.packageData[0].btnInfo=localPayment["choose"];this.packageData[0].btnClass="yellow-btn";this.packageData[1].btnInfo=localPayment["choose"];this.packageData[1].btnClass="yellow-btn";this.packageData[2].btnInfo=localPayment["choose"];jQuery("#btnFree").html(localPayment["choose"]);jQuery("#btnBasic").html(localPayment["choose"]);jQuery("#btnPlus").html(localPayment["choose"]);jQuery("#btnFree").removeClass("gray-btn").addClass("yellow-btn");jQuery("#btnBasic").removeClass("gray-btn").addClass("yellow-btn");var data=this.packageData[0];data.isShow=true;this.$set(this.packageData,0,data);if(!this.isA){jQuery(".de-currency-dropdown").css({right:"30px"})}}}});var DEPaymentSuccess=new Vue({el:".c-payment-success",data:{local:localPayment,packageData:packageData,key:null,isUpgrade:false,paymentSuccessCallback:null,upgradeToMyLogo:null,affiliateURL:null},methods:{downloadNow:function(){if(DEPaymentSuccess.startDownload){DEPackage.showApp();jQuery(DEPaymentSuccess.$el).hide();DEPaymentSuccess.startDownload(DEPayment.paymentInfo.title,this.key)}},myLogo:function(){if(document.location.href.indexOf("/apps/logo")!=-1){localStorage.setItem("mylogo",true);window.FJGoToTemplate()}else{DEPackage.showApp();if(this.upgradeToMyLogo){this.upgradeToMyLogo()}jQuery(DEPaymentSuccess.$el).hide()}},edit:function(){DEPackage.showApp();jQuery(DEPaymentSuccess.$el).hide();if(this.paymentSuccessCallback)this.paymentSuccessCallback(this.key)},updateAffiliate:function(amount,transactionID){if(amount>0&&"www.designevo.com"==document.domain)this.affiliateURL="https://shareasale.com/sale.cfm?amount="+amount+"&tracking="+transactionID+"&transtype=sale&merchantID=79751";else this.affiliateURL=null},setPaymentSuccessCallback:function(func){this.paymentSuccessCallback=func}}});function myLogoClick(){DEPaymentSuccess.myLogo()}window.dg=new PAYPAL.apps.DGFlow({trigger:["pp_payment"],expType:"instant"});window.dg.closeCallback=function(){DEPayment.isShowAnimate=false};window.doPayPal=function(token,payer){DEPayment.doPay(token,payer)};window.paypalBack=function(flag){if(flag==0){DEPayment.paymentFailed("Payment failed!")}else{DEPayment.isShowAnimate=false}};
